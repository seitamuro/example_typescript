# Chat-App

Socket.ioを使って簡単なチャットアプリを作成する｡

- ルーム機能
- 名前表示
- ルームに入る前のメッセージを表示

# 機能の実装方法

socket.io+jQuery+expressで最初に書いた機能を持つ簡単なチャットアプリを作成しました｡書く機能をどのように実装したのかをメモ書きしておきます｡

## ルーム機能

socket.ioの提供するルーム機能を利用しました｡この機能は`connection`イベントが発生したときに渡されたソケットの`.join(ルーム名)`を使うことで､そのソケットを特定のルーム(~NameSpaceみたいなもの)に割り当てることができます｡これで同じルームに割り当てられたソケットに対して`io.to(ルーム名).emit()`で一括でイベントを発生させることができます｡これを利用して､入室時に入力されたルーム名をそのまま`ルーム名`に割り当てることでチャットアプリにルーム機能を追加しています｡

## 名前表示

入室時にユーザー名を入力してもらい､その内容をメッセージが送られるたびに表示されるようにしています｡この値はローカル環境で保存しておき､新しいメッセージをサーバーに送るときに一緒に送ってもらいます｡その値をサーバー側のローカル変数にメッセージとユーザー名を辞書型変数で保存しておき､新しいメッセージを同じルームのメンバーに送っています｡

## 今までのメッセージを表示

名前表示の項目に書いたように､サーバー側で今までのメッセージをユーザー名とペアで記憶しています｡このデータを新しく入室してきたユーザーに送信し､ユーザー側でレンダリングして表示してもらっています｡

# 改善点

改善点は以下の通りです｡

- メッセージをデータベースで記憶する
- ログイン機能
- セキュリティ
    - クライアント側で簡単になり済ませてしまうのでこれを改善
- GUIを良くする
- ユーザー側ではローカル変数ではなく､クッキーを利用する

次からのアプリでは､上記の機能を実装していきます｡コードをきれいにしたいのと､Reactなどを導入したいので､リポジトリを変える予定です｡